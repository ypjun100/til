# 이벤트 버블링과 캡처링

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbaXL4U%2FbtrYIxkEMH0%2FOvpKUBUg6HK0Bo6m6ifGRk%2Fimg.png)

* HTML 문서의 요소는 계층적으로 이루어진 구조로, 이벤트가 발생할 경우 연쇄적 이벤트 흐름이 일어남
* 이러한 현상을 이벤트 전파라 부르며, 전파 방향에 따라 버블링 전파와 캡처링 전파로로 구분함
	* 어떤 전파 방향을 사용할 것이냐는 옵션을 통해 제어할 수 있으며, 둘의 동시 사용도 가능함

### 이벤트 버블링

```html
<div onclick="alert('form')">
	<div onclick="alert('form')">
		<p onclick="alert('form')">Click me</p>
	</div>
</div>
```

* 한 요소에 이벤트가 발생되면, 그 요소의 부모 요소의 이벤트가 함께 발생되는 이벤트 전파를 말함
	* 제일 깊은 곳에 있는 요소에서 시작해 부모 요소를 거슬러 올라가며 발생하는 모양이 거품과 닮음
* 이벤트는 기본적으로 버블링 방식으로 전파되며, 자식 요소에 이벤트가 발생하면 부모 요소에도 영향을 끼침
* 위 코드에서 가장 안쪽의 요소를 클릭하면 자식 -> 부모 -> 조상 순으로 이벤트가 발생됨

### 이벤트 캡처링

```js
// 캡처링 동작
element.addEventListener('click', (e) => { ... }, true);
```

* 요소에 이벤트가 발생되면 그 요소의 자손 이벤트도 같이 발생되는 이벤트 전파로, 이벤트 버블링의 반대임
* 브라우저의 이벤트 전파 방식은 버블링이 기본값이기 때문에 캡처링으로 설정하기 위해선 옵션이 필요함
	* 자바스크립트 `addEventListener()` 함수의 매개변수로 true 값을 주면 캡처링이 활성화됨
	* 이벤트는 캡처링으로 탐색하고, 버블링으로 돌아오며 같은 이벤트가 두 번 실행되기에 하나만 가능함

### 이벤트 전파 제어

* 만약 부모와 자식 둘 다 이벤트를 등록한 상태에서 자식 요소를 클릭하는 경우 부모 요소에도 같이 영향을 줌
* 브라우저는 캡처링 -> 버블링으로 동작되기에 구조를 바꿀 순 없고 이벤트 전파를 방지하여 해결해야 함
* **`e.stopPropagation()`**
	* 버블링 또는 캡처링 설정에 따라 상위 혹은 하위로 가능 이벤트 전파를 막을 수 있는 메서드
* **`e.preventDefault()`**
	* 이벤트 전파 뿐만 아니라 기본 이벤트 동작 자체를 취소하는 메서드