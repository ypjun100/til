# 호이스팅

* 코드에 선언된 변수나 함수를 최상단으로 끌어올리는 것으로, 변수의 범위에 따라 다르게 수행될 수 있음
	* 변수가 함수 내에서 정의되면 해당 함수의 최상위로 올라가며, 함수 밖인 경우 전역 최상위로 올라감
* 변수 혹은 함수에 따라 호이스팅 방식이 다르고 `var`과 같은 키워드에 따라 방식이 또 바뀔 수 있음

> 호이스팅은 함수 호이스팅을 지원하기 위해 제공되기 시작됐다. 기존 프로그래밍 언어의 경우 `A` 함수가 `B` 함수를 실행하기 위해서는 `B` 함수는 `A` 함수보다 이전에 선언되어야 하지만 만약, 호이스팅이 함수에 적용된다면 함수의 선언 순서와 관계없이 각 함수가 다른 함수들을 실행시킬 수 있다.

### 변수 호이스팅
* 변수는 `선언 단계`, `초기화 단계`, `할당 단계`를 거쳐서 생성됨
* `선언 단계` : 변수를 실행 컨텍스트의 변수 객체에 등록하여 스코프가 참조하는 대상이 되도록 함
* `초기화 단계` : 변수 객체에 등록된 변수를 위한 공간을 메모리에 확보한 후 `undefined`로 초기화 함
* `할당 단계` : `undefined`로 초기화된 변수에 실제 값을 할당함
##### 1. `var` 변수
```js
// 스코프 선두에서 선언 단계와 초기화 단계가 이루어짐
console.log(foo); // undefined

var foo;
foo = 1; // 할당 단계
console.log(foo); // 1
```
* 스코프 선두에서 해당 변수에 대한 `선언 단계`와 `초기화 단계`가 한번에 이루어짐
* 따라서, 변수 선언 이전에는 `undefined`를 반환하고, 선언 이후에는 해당 값을 반환함

##### 2. `let`, `const` 변수
```js
// 스코프 선두에서 선언 단계가 이루어짐
console.log(foo); // ReferenceError: foo is not defined

let foo; // 초기화 단계
foo = 1; // 할당 단계
console.log(foo); // 1
```
* 스코프 선두에서 `선언 단계`가 실행된 후에 변수 선언 코드에 도달했을 때 `초기화 단계`가 이루어짐
* 따라서, 변수 선언 이전에 접근하면 에러를 발생시키고, 선언 이후에는 정상적으로 값을 반환함
* **스코프의 시작점부터 초기화 시작점까지의 구간을 TDZ(Temporal Dead Zone)이라고 부름**

### 함수 호이스팅
```js
hoisted(); // foo

function hoisted() {
	console.log("foo");
}
```

* 함수의 경우 `선언 단계`, `초기화 단계`, `할당 단계`가 한번에 진행됨
* 따라서, 함수 선언 전에 해당 함수를 호출해도 정상적으로 함수가 실행됨
* 하지만, 함수 표현식은 `선언 단계`, `초기화 단계`까지만 진행되므로 함수 실행시 오류가 발생함

```js
console.log(hoisted); // undeinfed
hoisted();            // TypeError: hoisted is not a function

var hoisted = function() {
	console.log("foo");
};
```