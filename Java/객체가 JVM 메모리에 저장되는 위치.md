# 객체가 JVM 메모리에 저장되는 위치

![](https://blog.kakaocdn.net/dn/brvkNA/btrIPYdYwMf/C5wCqtVNLvu642vOaGyCBK/img.png)

* 객체 내부에는 `인스턴스 멤버(필드 및 메소드)`, `정적 멤버(필드 및 메소드)`가 저장될 수 있음
* 기본적으로 객체는 힙 메모리에 저장되지만, 객체 내부의 요소들이 저장되는 위치는 서로 다름

### 인스턴스 멤버
* 인스턴스 멤버는 객체 내에 선언된 필드와 메소드로, 인스턴스화되어야 사용이 가능함
* 인스턴스 필드는 객체가 힙에 생성될 때 힙에 동시에 생성되며, 객체와 동일한 공간에 속해 존재하게 됨
* 반면에, 인스턴스 메서드는 JVM 메모리의 메서드 영역에 저장되며, 객체와 별개로 저장됨
	* 인스턴스 필드는 객체마다 서로 다른 값을 가질 수 있지만, 메서드는 변경이 불가하기 때문
	* 동일한 모든 객체의 인스턴스 필드는 메서드 영역에 저장되어 있는 메서드를 공유하여 사용함

### 정적 멤버
* 객체 내에서 `static`  키워드로 설정된 필드 혹은 메소드로, 인스턴스화 필요 없이 접근이 가능함
* 모든 정적 멤버는 Java 8부터 JVM 상의 힙 메모리 내부의 MetaSpace 영역에 저장됨
* 동일한 모든 객체는 MetaSpace 영역의 정적 멤버를 참조하며 공유하게 됨

> **객체 간의 값을 공유하는 정적 멤버가 힙 메모리에 저장되는 이유**
> Java 8 이전에는 PermGen이라는 공간에 정적 멤버들을 저장했다. 하지만 이 공간은 확장이 불가능한 고정 크기의 공간이었기 때문에 메모리 확장이 가능한 힙 메모리에 새로운 영역을 만들어 정적 객체들을 저장하게 되었다. 이를 통해 Garbage Collector는 힙 메모리 내에서만 작동하면 됐었기 때문에 성능 향상을 도모할 수 있었고,  PermGen의 사이즈를 얼마나 크게 줄 것인가에 대한 딜레마를 해결할 수 있었다.